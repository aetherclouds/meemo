{"version":3,"file":"Content.js","sources":["../../src/js/contentScript/Popup.svelte","../../src/js/contentScript/ToolBar.svelte","../../src/js/contentScript/Content.svelte"],"sourcesContent":["<script>\r\n    import { onMount } from \"svelte/internal\";\r\n    import {addNote, AnkiConnectionError, AnkiResponseError, getDeckNames, getModelFieldNames, getModelNames} from '../ankiConnectUtil'\r\n    import { EXTENSION_ALIAS, REPLACEMENT_STRING } from \"../const\";\r\n    import { horizontalSlideDisconsiderBorder } from \"../svelteTransition\";\r\n    import { compareArrays, escapeHtml } from \"../util\";\r\n\r\n    export let staticHoverNode\r\n    export let parentDocument = document\r\n    export let options\r\n    export let contentToSave = undefined    \r\n    export let initialX = 0\r\n    export let initialY = 0\r\n    let popupNode\r\n    let isPopupBeingDragged = false\r\n    let isPopupEnabled = false\r\n\r\n    let cardModelSelectNode\r\n    let selectedDeck\r\n    let deckNameSelectNode\r\n    let selectedModel\r\n    \r\n    let savedSyncFields\r\n    \r\n    let cardDecks = []\r\n    let cardModels = []\r\n    let cardModelFieldsData = {}\r\n    let messageType = ''\r\n    let canSubmit = false\r\n    let highlightWarnClose = false\r\n    let highlightSubmitSuccessful = false\r\n\r\n    const TRANSITION_DURATION_MS = 300\r\n    \r\n\r\n    onMount(() => {\r\n        popupNode.style.left = initialX + 'px'\r\n        popupNode.style.top = initialY + 'px'\r\n        isPopupEnabled = true\r\n        tryAnkiConnectionLoop()\r\n        parentDocument.addEventListener('mouseup', handleDocumentMouseUp)\r\n    })\r\n\r\n    async function tryAnkiConnectionLoop(isFirstTime = true) {\r\n        try {\r\n            const newCardDecks = await getDeckNames()\r\n            const newCardModels = await getModelNames()\r\n            if (!(newCardDecks && newCardModels)) {\r\n                throw new AnkiResponseError()\r\n            } else {\r\n                cardDecks = newCardDecks\r\n                cardModels = newCardModels\r\n\r\n                canSubmit = true\r\n\r\n                if (cardModels.length > 1) {\r\n                    updateModelFields(cardModels[0])\r\n                }\r\n\r\n                if (!isFirstTime) {\r\n                    messageType = 'success'\r\n                  setTimeout(() => {messageType = ''}, 5000)\r\n                } else {\r\n                    messageType = ''\r\n                }\r\n\r\n                // load synced options\r\n                selectedDeck = (await browserStorageSync.get('selectedDeck')).selectedDeck\r\n                selectedModel = (await browserStorageSync.get('selectedModel')).selectedModel\r\n                // load synced fields\r\n                savedSyncFields = (await browserStorageSync.get('savedFields')).savedFields || {}\r\n                // console.log('syncFied', savedSyncFields)\r\n\r\n          }\r\n        } catch (err) {\r\n            handleAnkiError(err, () => tryAnkiConnectionLoop(false))\r\n            \r\n        }\r\n    }\r\n\r\n    let secsUntilRetry = 0\r\n    function handleAnkiError(error, callback) {\r\n        console.error(EXTENSION_ALIAS + ' :', error)\r\n        switch (error.constructor) {\r\n            case AnkiConnectionError:\r\n            messageType = 'connection'\r\n            break\r\n        case AnkiResponseError:\r\n            messageType = 'response'\r\n            break\r\n        default:\r\n            messageType = 'unknown'\r\n            break\r\n        }\r\n\r\n        if (callback) {\r\n            secsUntilRetry = 5\r\n            let countdown = setInterval(() => {\r\n                secsUntilRetry-= 1\r\n                // check if popup is enabled to avoid an infinite loop when closed\r\n                if (secsUntilRetry == 0 && isPopupEnabled) {\r\n                    callback()\r\n                    clearInterval(countdown)\r\n                }\r\n            }, 1000)\r\n        }\r\n\r\n    }\r\n\r\n    async function handleSubmit(e) {\r\n        const formData = new FormData(e.target)\r\n        const fieldsVaues = Object.keys(cardModelFieldsData).reduce((obj, fieldName) => (\r\n            obj[fieldName]= cardModelFieldsData[fieldName].value,\r\n            obj\r\n            ), {})\r\n        const fieldsValuesReplaced = Object.keys(fieldsVaues).reduce((obj, fieldName) => (\r\n            obj[fieldName]=fieldsVaues[fieldName].replaceAll('$replace$', contentToSave),\r\n            obj\r\n            ), {})\r\n\r\n        canSubmit = false\r\n        let callbackResult\r\n        try {\r\n            callbackResult = await addNote(formData.get('deckName'), formData.get('modelName'), fieldsValuesReplaced)\r\n        } catch (err) {\r\n            messageType = 'response'\r\n            setTimeout(() => {\r\n                messageType = ''\r\n            }, 5000)\r\n        }    \r\n        if (callbackResult) {\r\n            // console.log('callback:', callbackResult)\r\n            highlightSubmitSuccessful = true\r\n            setTimeout(() => {\r\n                highlightSubmitSuccessful = false\r\n            }, 5000)\r\n            // sync selections\r\n            syncDeckAndModelChoices(formData.get('deckName'), formData.get('modelName'))\r\n            // console.log('fieldData',cardModelFieldsData)\r\n            syncFields(cardModelFieldsData)\r\n        } else {\r\n            handleAnkiError(new AnkiResponseError())\r\n        }\r\n        canSubmit = true\r\n    }\r\n\r\n    function syncDeckAndModelChoices(deckName, modelName) {\r\n        chrome.storage.sync.set({selectedDeck: deckName, selectedModel: modelName})\r\n    }\r\n\r\n    function syncFields(fieldsData) {\r\n        /* \r\n        I suppose there's no documentation, but for Array.reduce(), if you return 2 items then 1st value should be the \"accumulation function\",\r\n        and the 2nd should be the accumulation itself. so for an object, an assignment and the object itself.\r\n        if you only return 1 object, it should be the accumulation. quirky, huh?\r\n        */\r\n        // I wanted to make this save for every field BUT it could eat up the storage for storage.sync so...   \r\n        let serializedFields = Object.keys(fieldsData).reduce((obj, fieldName) => {\r\n            if (fieldsData[fieldName].shouldSave) {\r\n                return (obj[fieldName] = fieldsData[fieldName].value,obj)\r\n            } else {\r\n                return obj\r\n            }\r\n        }, {})\r\n        if (Object.keys(serializedFields).length <= 0) {\r\n            chrome.storage.sync.remove('savedFields')\r\n        } else {\r\n            chrome.storage.sync.set({savedFields: serializedFields})\r\n        }\r\n        // console.log('saving fields:', serializedFields, fieldsData)\r\n    }\r\n\r\n    let initialDragOffsetX, \r\n        initialDragOffsetY\r\n    function handleDragMouseDown(e) {\r\n        const popupRect = popupNode.getBoundingClientRect()\r\n        // offset should be negative because the popup's top-left is always a negative amount offset\r\n        // from the cursor. this is just calculating that offset based on where the cursor is on the popup\r\n        initialDragOffsetX = - e.clientX + popupRect.left\r\n        initialDragOffsetY = - e.clientY + popupRect.top \r\n        parentDocument.addEventListener('mousemove', handleDragMouseMove)\r\n        parentDocument.addEventListener('mouseup', handleDragMouseUp)\r\n        isPopupBeingDragged = true\r\n        highlightWarnClose = false\r\n        highlightSubmitSuccessful = false\r\n    }\r\n    \r\n    function handleDragMouseUp(e) {\r\n        isPopupBeingDragged = false\r\n\r\n        parentDocument.removeEventListener('mousemove', handleDragMouseMove)\r\n        parentDocument.removeEventListener('mouseup', handleDragMouseUp)\r\n    }\r\n        \r\n    function handleDragMouseMove(e) {\r\n        e.preventDefault()\r\n        popupNode.style.left = (options.shouldPopupBePinned.value ? e.clientX : e.pageX) + initialDragOffsetX + 'px'\r\n        popupNode.style.top = (options.shouldPopupBePinned.value ? e.clientY : e.pageY) + initialDragOffsetY + 'px'\r\n    }\r\n\r\n    function handleDocumentMouseUp(e) {\r\n        if (e.target.id != EXTENSION_ALIAS+'-root') {\r\n            if (highlightWarnClose) {\r\n                destroyPopup()\r\n            } else {\r\n                highlightWarnClose = true\r\n            }\r\n        } else {\r\n            highlightWarnClose = false\r\n        }\r\n    }\r\n\r\n    function destroyPopup() {\r\n        isPopupEnabled = false\r\n        parentDocument.removeEventListener('mouseup', handleDocumentMouseUp)\r\n        setTimeout(() => {\r\n            popupNode.parentNode.removeChild(popupNode)\r\n        }, TRANSITION_DURATION_MS)\r\n    }\r\n\r\n    async function handleDeckSelectionChange(e) {\r\n        selectedDeck = e.target.value\r\n    }\r\n\r\n    async function handleModelSelectChange(e) {\r\n        selectedModel = e.target.value\r\n        updateModelFields(e.target.value)\r\n    }\r\n\r\n\r\n    async function updateModelFields(modelName) {\r\n        const fields = await getModelFieldNames(modelName)\r\n\r\n        /* THIS FUNCTION compares if field structures between selected model vs synced model are similar,\r\n         and only then replaces them with what's saved in sync. this is safer, however I think it's \r\n         okay to replace matching field names even if they are different structures. therefore,\r\n         I'm not using this function anymore */\r\n        // if (compareArrays(Object.keys(savedSyncFields).sort(), fields.slice().sort())) {         \r\n        //     console.log('are similar')\r\n        //     cardModelFieldsData = fields.reduce((obj, field) => {\r\n        //         const savedFieldContent = savedSyncFields[field]\r\n        //         return (obj[field]={\r\n        //             value: savedFieldContent || '', \r\n        //             shouldSave: savedFieldContent ? true : false,\r\n        //             displayHTML: replaceWithCoolSpan(savedFieldContent)\r\n        //         },obj)\r\n        //     }, {})\r\n        // } else {\r\n        //     cardModelFieldsData = fields.reduce((obj, field) => (obj[field]={value:'', shouldSave: false, displayHTML:''},obj), {})\r\n        // }\r\n        cardModelFieldsData = fields.reduce((obj, field) => { \r\n            // check if there's a field with the same name in sync - then replace with synced value\r\n            if(savedSyncFields[field]) {\r\n                return (obj[field]={\r\n                    value: savedSyncFields[field], \r\n                    shouldSave: true, \r\n                    displayHTML: replaceWithCoolSpan(savedSyncFields[field])\r\n                },obj)\r\n            } else {\r\n                return (obj[field]={\r\n                    value:'', \r\n                    shouldSave: false, \r\n                    displayHTML:''\r\n                },obj)\r\n            }\r\n        }, {})\r\n        // THIS IS A TEMPORARY REPLACEMENT UNTIL ABOVE IS IMPLEMENTED\r\n        // cardModelFieldsData = fields.reduce((obj, fieldName) => (obj[fieldName]={value: '', shouldSave: false},obj), {})\r\n\r\n    }\r\n\r\n    function replaceWithCoolSpan(content) {\r\n        const escapedContent = escapeHtml(content)\r\n        const idxOfReplaceable = content.indexOf(REPLACEMENT_STRING)\r\n        let newContent\r\n        if (idxOfReplaceable != -1) {\r\n            newContent = escapedContent.replaceAll(REPLACEMENT_STRING, `<span class=\"replaceable\">${REPLACEMENT_STRING}</span>`) \r\n        }\r\n        return newContent\r\n    }\r\n\r\n    // adapted from https://stackoverflow.com/a/12028136\r\n    function handlePasteContenteditable(e) {\r\n        // cancel paste\r\n        e.preventDefault();\r\n\r\n        // get text representation of clipboard\r\n        var text = (e.originalEvent || e).clipboardData.getData('text/plain');\r\n\r\n        // insert text manually\r\n        document.execCommand(\"insertHTML\", false, text);\r\n    }\r\n    \r\n    function handleFieldInput(e) {\r\n        const fieldName = e.target.dataset.fieldname\r\n        const content = e.target.value\r\n        const escapedContent = escapeHtml(content)\r\n        cardModelFieldsData[fieldName].value = escapedContent\r\n        const idxOfReplaceable = escapedContent.indexOf(REPLACEMENT_STRING)\r\n        let replacedContent\r\n        if (idxOfReplaceable != -1) {\r\n            replacedContent = escapedContent.replaceAll(REPLACEMENT_STRING, `<span class=\"replaceable\">${REPLACEMENT_STRING}</span>`) \r\n        \r\n            cardModelFieldsData[fieldName].shouldSave = true\r\n        } else {\r\n            replacedContent = escapedContent\r\n            cardModelFieldsData[fieldName].shouldSave = false\r\n        }\r\n        // this is TERRIBLE.. but it's the only way because updating through the cardModelFieldsData object generates a slight delay,\r\n        // so when we get the displayHTMlNodeRect it won't match with the current display HTML\r\n        e.target.nextElementSibling.innerHTML = replacedContent\r\n        cardModelFieldsData[fieldName].displayHTML = replacedContent\r\n        const displayHTMLNodeRect = e.target.nextElementSibling.getBoundingClientRect()\r\n        e.target.style.height = displayHTMLNodeRect.height / options.UIScale.value + 'px'\r\n        e.target.style.width = displayHTMLNodeRect.width / options.UIScale.value + 'px'\r\n    }\r\n</script>\r\n\r\n<!-- we could use Svelte's component initialization `intro`, but I also want an exit transition so.. -->\r\n<dialog open bind:this={popupNode} class=\"{options.shouldPopupBePinned.value ? 'fixed' : 'absolute'} p-0 m-0 bg-transparent popup\"\r\nstyle=\"--UIScale: {options.UIScale.value}\"\r\n>\r\n    <!-- \r\n        {isPopupBeingDragged  ? \r\n            'shadow-xl shadow-black/10'\r\n            : 'shadow-sm ' \r\n            +  ((highlightSubmitSuccessful || messageType=='success') ? \r\n                'shadow-green-400'\r\n                : (messageType ?\r\n                    'shadow-red-400'\r\n                    : '' ))\r\n        }\r\n    -->\r\n    {#if isPopupEnabled}\r\n    <div class=\"bg-zinc-800/90 w-[20rem] max-w-[20rem] rounded-[0.3rem] blur-bg relative border\r\n    {isPopupBeingDragged  ? \r\n        'shadow-xl shadow-black/10'\r\n        : 'shadow-sm '\r\n    }\r\n    {messageType ? \r\n        (messageType!='success') && !highlightSubmitSuccessful ? \r\n            'border-red-400'\r\n            : 'border-green-400' \r\n        : (highlightSubmitSuccessful) ? \r\n            'border-green-400'\r\n            : 'border-transparent'\r\n    }\r\n    {highlightWarnClose ? ' ring-1 ring-blue-400 ' : ''}\r\n    duration-100\"\r\n    style=\"transition-property: box-shadow, border-color;\"\r\n    transition:horizontalSlideDisconsiderBorder={{axis: 'y', duration: options.useMotion.value ? TRANSITION_DURATION_MS : 0}}\r\n    >\r\n        <div draggable class=\"w-full h-min py-1.5 rounded-[0.3rem] box-border flex cursor-move\r\n        hover:bg-zinc-500/20 transition-colors duration-100\r\n        \" on:mousedown={handleDragMouseDown} on:mouseup={handleDragMouseUp}>\r\n            <div class=\"grid grid-rows-2 grid-cols-4 mx-auto w-max justify-center gap-x-1 gap-y-1 my-auto\">\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n                <div class=\"bg-zinc-500 rounded-full aspect-square w-[0.16rem] h-[0.16rem]\"></div>\r\n            </div>\r\n        </div>\r\n        <div class=\"p-5 flex flex-col max-h-xs overflow-auto bg-transparent\">\r\n            <h1 class=\"text-blue-gradient font-bold text-xl mx-auto mb-5\">\r\n                Add2Anki\r\n            </h1>\r\n            {#if messageType}\r\n            <div class=\"rounded-[0.3rem] border {messageType == 'success' ? 'border-green-400' : 'border-red-400'} text-zinc-300 px-2 py-1 mb-3 flex flex-col h-max text-xs hyphens-auto\" style=\"transition: border-color 500ms, height 500ms;\"\r\n                transition:horizontalSlideDisconsiderBorder={{axis: 'y', duration: options.useMotion.value ? 500 : 0}}\r\n            >\r\n                <div>\r\n                {#if messageType == 'connection'}\r\n                    There has been a connection error. Make sure that Anki is open, and that <a class=\"text-blue-400 underline\" href=\"https://ankiweb.net/shared/info/2055492159\" target=\"_blank\">AnkiConnect</a> is installed & running.\r\n                {:else if messageType == 'response'}\r\n                    There has been a response error. AnkiConnect is running but did not respond properly.\r\n                {:else if messageType == 'unknown'}\r\n                    There has been an uknown error. ¯\\_(ツ)_/¯\r\n                {:else if messageType == 'success'}\r\n                    Successfully reconnected with Anki!\r\n                {/if}\r\n                </div>\r\n                {#if messageType == 'connection'}\r\n                <div class=\"block text-[0.5rem] text-zinc-400\">retrying in {secsUntilRetry} second(s) . . .</div>\r\n                {/if}\r\n            </div>\r\n            {/if}\r\n            {#if contentToSave != undefined}\r\n            <div class=\"text-xs text-zinc-400 mb-3 mx-auto flex items-center\">\r\n                <span class=\"replaceable\">{REPLACEMENT_STRING}</span>\r\n                <span>&nbsp;&rarr;&nbsp;</span>\r\n                <span contenteditable class=\"break-all text-zinc-300 rounded hover:bg-zinc-500/20 border-transparent hover:border-zinc-400 outline-none focus:border-blue-400 focus:bg-zinc-500/20 transition-colors duration-100 border px-1\" \r\n                bind:innerHTML={contentToSave} on:input={(e) => {let content = e.target.innerHTML; content = escapeHtml(content)}}\r\n                style=\"min-width: 10px;\"\r\n                ></span>\r\n            </div>\r\n            {/if}\r\n            <form action=\"\" class=\"text-zinc-300 text-sm\" on:submit|preventDefault={handleSubmit} id=\"leForm\">\r\n                <div class=\"w-full grid grid-cols-2 mb-3\">\r\n                    <div class=\"pr-2\">\r\n                        <label for=\"deckName\" class=\"block mb-0.5 label-on-focus\">Card Deck</label>\r\n                        <div class=\"relative\">\r\n                            <select name=\"deckName\" id=\"deckName\" class=\"w-full rounded-[0.3rem] bg-zinc-500/20 border border-zinc-600 truncate outline-none hover:border-zinc-400 focus:border-blue-400 transition-colors duration-100\"\r\n                            on:change={handleDeckSelectionChange}\r\n                            bind:this={deckNameSelectNode}\r\n                            >\r\n                                {#each cardDecks as deckName}\r\n                                    <option value={deckName} class=\"bg-zinc-800\" selected={(deckName == selectedDeck) || null}>{deckName}</option>\r\n                                {/each}\r\n                            </select>  \r\n                            <select disabled class=\"absolute w-full h-full top-0 left-0 bg-transparent border border-transparent text-zinc-500 pointer-events-none\"></select>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"pl-2\">\r\n                        <label for=\"modelName\" class=\"block mb-0.5\">Card Model</label>  \r\n                        <div class=\"relative\">\r\n                            <select name=\"modelName\" id=\"modelName\" class=\"w-full rounded-[0.3rem] bg-zinc-500/20 border border-zinc-600 truncate outline-none hover:border-zinc-400 focus:border-blue-400 transition-colors duration-100\"\r\n                            on:change={handleModelSelectChange}\r\n                            bind:this={cardModelSelectNode}\r\n                            >\r\n                                {#each cardModels as modelName}\r\n                                    <option value={modelName} class=\"bg-zinc-800\" selected={(modelName == selectedModel) || null}>{modelName}</option>\r\n                                {/each}\r\n                            </select>\r\n                            <select disabled class=\"absolute w-full h-full top-0 left-0 bg-transparent border border-transparent text-zinc-500 pointer-events-none\"></select>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                {#each Object.entries(cardModelFieldsData) as [fieldTitle, fieldDetails]}\r\n                    <div class=\"flex align-middle mb-0.5 items-center\">\r\n                        <label for={'field-'+fieldTitle} class=\"mr-2\">{fieldTitle}</label>\r\n                        <small class=\"text-[0.6rem] text-zinc-400\">{#if fieldDetails.shouldSave}This field will stay saved{/if}</small>\r\n                    </div>\r\n                    <div class=\"relative w-full rounded mb-3\" data-fieldName={fieldTitle} id={fieldTitle}>\r\n                        <textarea rows=\"1\" id='field-{fieldTitle}' on:input={handleFieldInput} bind:value={fieldDetails.value} data-fieldName={fieldTitle} class=\"peer bg-transparent w-full overflow-hidden resize-none break-all relative top-0 left-0 webkit-text-transparent px-1 border border-transparent appearance-none outline-none rounded-[0.3rem]\"></textarea>\r\n                        <div id='field-display-{fieldTitle}' contenteditable=\"true\" class=\"absolute size-inherit break-all top-0 left-0 bg-zinc-500/20 pointer-events-none overflow-clip px-1 border border-transparent hyphens-auto  peer-hover:border-zinc-400 border-zinc-600 rounded-[0.3rem] peer-focus:border-blue-400 transition-colors duration-100\" bind:innerHTML={fieldDetails.displayHTML}></div>\r\n                        <!-- <div contenteditable=\"true\" id={'field-'+fieldTitle} bind:innerHTML={fieldDetails.value} on:input={handleFieldInput} on:paste={handlePasteContenteditable} data-fieldName={fieldTitle} class=\"break-all relative top-0 left-0 webkit-text-transparent px-1 border hover:border-zinc-400 border-zinc-600 rounded-[0.3rem] appearance-none outline-none focus:border-blue-400 transition-colors duration-100\"></div> -->\r\n                    </div>\r\n                {/each}\r\n                <div class=\"opacity-0 block mb-0.5\">&nbsp;</div>\r\n                <button type=\"submit\" class=\"w-full rounded-[0.3rem] bg-zinc-500/20 border border-zinc-600 text-sm py-1 appearance-none outline-none enabled:hover:border-blue-400 enabled:hover:text-blue-400 focus:border-blue-400 focus:text-blue-400 shadow-none focus:shadow-inner disabled:opacity-80 disabled-border-zinc-600 transition-colors duration-100\" disabled={!canSubmit || undefined}>Add that thing!</button>\r\n            </form>\r\n        </div>\r\n    </div>\r\n    {/if}\r\n</dialog>\r\n\r\n<style lang=\"postcss\">\r\n    @tailwind base;\r\n    @tailwind components;\r\n    @tailwind utilities;\r\n\r\n    .blur-bg {\r\n        -webkit-backdrop-filter: blur(3px); \r\n        backdrop-filter: blur(3px);\r\n    }\r\n\r\n    .text-blue-gradient {\r\n        /* little hack - probably from css-tricks */\r\n        background-image: linear-gradient(to bottom, #63AAE1, #466FDA);\r\n        background-size: 100%;\r\n        background-repeat: repeat;\r\n\r\n        -webkit-background-clip: text;\r\n        -webkit-text-fill-color: transparent; \r\n        -moz-background-clip: text;\r\n        -moz-text-fill-color: transparent;\r\n    }\r\n\r\n    :global(.replaceable) {\r\n        @apply text-blue-400;\r\n    }\r\n    \r\n    .size-inherit {\r\n        width: inherit;\r\n        height: inherit;\r\n    }\r\n\r\n    .webkit-text-transparent {\r\n        -webkit-text-fill-color: transparent;\r\n    }\r\n\r\n    .popup {\r\n        transform-origin: top left;\r\n        scale: var(--UIScale);\r\n    }\r\n</style>\r\n","<script>\r\n    import Popup from \"./Popup.svelte\";\r\n\r\n\r\n    export let staticHoverNode\r\n    export let parentDocument\r\n    export let selectionText\r\n    export let hideToolbar\r\n    export let options\r\n    let toolbarNode\r\n    let popup\r\n\r\n    function mountPopup() {\r\n        const toolbarRect = toolbarNode.getBoundingClientRect() \r\n        popup = new Popup({\r\n            target: staticHoverNode,\r\n            props: {\r\n                parentDocument,\r\n                staticHoverNode,\r\n                initialX: toolbarRect.left + (options.shouldPopupBePinned.value ? 0 : document.documentElement.scrollLeft || document.body.scrollLeft),\r\n                initialY: toolbarRect.top + (options.shouldPopupBePinned.value ? 0 : document.documentElement.scrollTop || document.body.scrollTop),\r\n                contentToSave: selectionText,\r\n                options\r\n            },\r\n            // intro: true,\r\n        })\r\n    }\r\n\r\n    function handleClickAnki() {\r\n        mountPopup()\r\n        hideToolbar()\r\n    }\r\n</script>\r\n\r\n<div class=\"panel\" on:click={handleClickAnki} bind:this={toolbarNode}>\r\n    <img src={chrome.runtime.getURL('assets/icons/anki.png')} alt=\"Save 2 Anki\" class=\"icon\">\r\n</div>\r\n<style>\r\n.icon {\r\n    height: 18px;\r\n    /* https://stackoverflow.com/a/37596806 */\r\n    display: block;\r\n}\r\n\r\n.panel {\r\n    z-index: 999;\r\n    cursor: pointer;\r\n    height: min-content;\r\n    width: min-content;\r\n    background-color: hsla(306, 92%, 54%, .8);\r\n    vertical-align: bottom;    \r\n    -webkit-backdrop-filter: blur(3px); \r\n    backdrop-filter: blur(3px);\r\n}\r\n</style>","<script>\r\n    import { onMount } from 'svelte'\r\n    import * as Util from \"../util\"\r\n    import ToolBar from './ToolBar.svelte'\r\n    import { DEFAULT_OPTIONS, EXTENSION_ALIAS, browserStorageSync } from '../const'\r\n    import Popup from './Popup.svelte'\r\n    \r\n    export let rootNode\r\n    export let shadowRootNode\r\n    export let parentDocument = document\r\n    \r\n    let isExtensionOn = false\r\n    let pageWidth\r\n    let hoverNode, hoverContentNode\r\n    \r\n    let isHoverOn = false\r\n    let hoverX = 0,\r\n        hoverY = 0,\r\n        cursorX = 0,\r\n        cursorY = 0\r\n    let isMakingSelection = false\r\n    let previousWord\r\n    let staticHoverNode\r\n    \r\n    let options = DEFAULT_OPTIONS\r\n    // try load from sync\r\n    browserStorageSync.get('options').then(result => {\r\n        options = result.options || DEFAULT_OPTIONS\r\n    })\r\n    \r\n    let hoverContent = []\r\n\r\n    onMount(() => {\r\n        readyParent()\r\n    })\r\n    \r\n    function hoverAnimateLoop() {\r\n        hoverNode.style.left = hoverX + 'px'\r\n        hoverNode.style.top = hoverY + 'px'\r\n        window.requestAnimationFrame(hoverAnimateLoop)\r\n    }\r\n    ''\r\n    function readyParent() {\r\n        // we'll assume this is always constant cuz it probably is + saves on performance\r\n        pageWidth = Util.getPageWidth()\r\n    \r\n        // check if extension is globally enabled \r\n        chrome.runtime.sendMessage({type: 'isExtensionOn'}, response => {\r\n            console.log(EXTENSION_ALIAS, ': checking: isExtensionOn?',response.isExtensionOn)\r\n            // check if isExtensionOn is already on so we don't run this function twice\r\n            if (response.isExtensionOn && !isExtensionOn) {\r\n                enableExtension() \r\n            }\r\n        })\r\n    \r\n        setTimeout(() => { // wait a bit for 1st trigger of onmousemove so that we have mouseX and mouseY being non-0.\r\n            hoverAnimateLoop()\r\n        }, 50)\r\n    }\r\n    \r\n    // LISTEN TO MESSAGES FROM BACKGROUND SCRIPT\r\n    chrome.runtime.onMessage.addListener(\r\n        function(request, sender, sendResponse) {\r\n            switch (request.type) {\r\n                case 'enableExtension':\r\n                    if (!isExtensionOn) enableExtension()\r\n                    break\r\n                case 'disableExtension':\r\n                    disableExtension()\r\n                    break\r\n                case 'updateOptions':\r\n                    options = request.data\r\n                    break\r\n                default:\r\n                    break\r\n            }\r\n        }\r\n    )\r\n    \r\n    // ENABLE/DISABLE EXTENSION\r\n    function enableExtension() {\t\r\n        isExtensionOn = true\r\n        parentDocument.addEventListener('mousemove', handleMouseMove)\r\n        parentDocument.addEventListener('selectionchange', handleSelectionChange)\r\n        parentDocument.addEventListener('keydown', handleKeyDown)\r\n        \r\n        parentDocument.body.appendChild(rootNode)\r\n    }   \r\n    \r\n    function disableExtension() {\r\n        isExtensionOn = false\r\n        parentDocument.removeEventListener('mousemove', handleMouseMove)\r\n        parentDocument.removeEventListener('selectionchange', handleSelectionChange)\r\n        parentDocument.removeEventListener('keydown', handleKeyDown)\r\n\r\n    \r\n        let existingShadowRoot = parentDocument.getElementById(`${EXTENSION_ALIAS}-root`)\r\n        if (existingShadowRoot) {\r\n            existingShadowRoot.remove()\r\n        }\r\n    }\r\n    \r\n    // SHOW/HIDE HOVER \r\n    function showHover(data) {\r\n        hoverContent = data\r\n        isHoverOn = true\r\n        hoverNode.style.opacity = 1\r\n    }\r\n    \r\n    function hideHover() {\r\n        if (isMakingSelection) return\r\n        isHoverOn = false\r\n        // hoverContent = []\r\n        previousWord = ''\r\n        hoverNode.style.opacity = 0\r\n    }\r\n    \r\n    function handleSelectionChange(e) {    \r\n        // https://stackoverflow.com/a/5379408\r\n        // https://stackoverflow.com/a/52157976 - this one would be cool because this listener will update on EVERY CHARACTER SELECTED instead of just mouseup. so maybe we could animate the hover with that.\r\n    \r\n        // https://stackoverflow.com/a/17569535 MODIFIED\r\n        // get selection \r\n        let selection = parentDocument.getSelection()\r\n        if (!selection.isCollapsed) {\r\n            let selectionRange = selection.getRangeAt(0)\r\n            let selectionText = selection.getRangeAt(0).toString().trim()\r\n            let selectionRect = selectionRange.getBoundingClientRect()\r\n    \r\n            isMakingSelection = true\r\n        \r\n            hoverX = selectionRect.x + (selectionRect.width / 2) - (hoverNode.offsetWidth / 2)\r\n            // https://stackoverflow.com/a/7436602\r\n            // TODO: fix hover hiding atop of page if it's too high up\r\n            hoverY = selectionRect.y + parentDocument.documentElement.scrollTop - ((hoverNode.offsetHeight + options.distanceToMouse.value) * options.UIScale.value)\r\n    \r\n            showHover([{\r\n                isSvelteComponent: true,\r\n                component: ToolBar,\r\n                props: {    \r\n                    staticHoverNode, \r\n                    parentDocument, \r\n                    selectionText,\r\n                    hideToolbar: () => {isMakingSelection=false;hideHover()},\r\n                    options\r\n                },\r\n            }])\r\n    \r\n        } else {\r\n            isMakingSelection = false\r\n            hideHover()\r\n        }\r\n    }\r\n    \r\n    \r\n    function handleMouseMove(e) {\r\n        cursorX = e.pageX\r\n        cursorY = e.pageY\r\n    \r\n        if (!hoverNode) return\r\n        if (isMakingSelection) return\r\n    \r\n        \r\n        let range\r\n        // https://gist.github.com/unicornist/ac997a15bc3211ba1235\r\n        if (parentDocument.caretRangeFromPoint) { // standard (WebKit)\r\n            range = parentDocument.caretRangeFromPoint(e.clientX, e.clientY);\r\n        } else if (e.rangeParent) { // Mozilla\r\n            range = parentDocument.createRange();\r\n            range.setStart(e.rangeParent, e.rangeOffset);\r\n        }\r\n        // const range = parentDocument.caretRangeFromPoint(e.clientX, e.clientY)\r\n\r\n        console.log('range', range)\r\n        if (!range) return\r\n        const node = range.startContainer\r\n        const nodeContent = node.nodeValue\r\n        if (!nodeContent) { // actually looking for (nodeContent !== null) but this is more general\r\n            hideHover()\r\n        } else {\r\n            // get position of cursor in a block of text\r\n            const cursorOffset = range.startOffset;\r\n        \r\n            const textLeftOfCursor = nodeContent.slice(0, cursorOffset)\r\n            const textRightOfCursor = nodeContent.slice(cursorOffset)\r\n            if (textLeftOfCursor && textRightOfCursor) { // mouse is over text\r\n                // regex honorable mentions:\r\n                // [^\\p{L}\\p{M}] - match any non \"readable\" character (l is charcter, m is accent)\r\n                // pattern(?![\\s\\S]*pattern) - negative lookahead / find last occurance -- https://stackoverflow.com/a/41870151\r\n                // NEW NEW pattern: [A-Za-zÀ-ÖØ-öø-ÿ9-] (and then negate it)\r\n                \r\n                // by separator we mean anything that would separate a word, like comma or space\r\n                const leftSeparatorIndex = textLeftOfCursor.search(/[^\\p{L}\\p{M}0-9-](?![\\s\\S]*[^\\p{L}\\p{M}0-9-])/u)\r\n                const rightSeparatorIndex = textRightOfCursor.search(/[^\\p{L}\\p{M}0-9-]/u)\r\n            \r\n                const startWordIndex = leftSeparatorIndex === -1 ? 0 : leftSeparatorIndex + 1 // ...? fallback : actual index \r\n                const endWordIndex = rightSeparatorIndex === -1 ? nodeContent.length : cursorOffset + rightSeparatorIndex\r\n    \r\n                // cut the desired word off of the text block\r\n                const word = nodeContent.slice(startWordIndex, endWordIndex)\r\n                // sanitize\r\n                const cleanedWord = word\r\n                .toLowerCase()\r\n                // .replace(/[^\\p{L}]/ug, \"\")\r\n    \r\n                // https://stackoverflow.com/a/10805180\r\n                // we only need to update it if it's actually different from the previous word\r\n                if (cleanedWord !== previousWord) {\r\n                    if (!cleanedWord) return\r\n                    previousWord = cleanedWord  \r\n                    chrome.runtime.sendMessage({word: cleanedWord, type: 'getGender'}, (response) => {\r\n                        // console.log('response',response)\r\n                        if (response.data.length > 0) { \r\n                            showHover(response.data)\r\n                        } else {\r\n                            hideHover()\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    \r\n        // update render\r\n        updateHoverCoordinates(e)\r\n    }\r\n\r\n    function handleKeyDown(e) {\r\n    e.stopImmediatePropagation()\r\n\r\n    if (document.activeElement.tagName === 'INPUT') return\r\n\r\n    if (((e.key === 'a' || e.key === 'A') && e.altKey && !e.metaKey && !e.shiftKey) ) {\r\n        new Popup({\r\n            target: staticHoverNode,\r\n            props: {\r\n                parentDocument,\r\n                staticHoverNode,\r\n                initialX: cursorX - (options.shouldPopupBePinned.value ? document.documentElement.scrollLeft || document.body.scrollLeft : 0),\r\n                initialY: cursorY - (options.shouldPopupBePinned.value ? document.documentElement.scrollTop || document.body.scrollTop : 0),\r\n                options,\r\n                contentToSave: '',\r\n            },\r\n            // intro: true,\r\n        })\r\n    }\r\n  }\r\n\r\n    \r\n    function updateHoverCoordinates(e) {\r\n        if (!isMakingSelection) {\r\n            // we don't want it going out of the window so we set a max horizontal distance it can go\r\n            hoverX = Math.min(window.innerWidth - (hoverNode.offsetWidth * options.UIScale.value) - 10, e.pageX + (options.distanceToMouse.value * options.UIScale.value))\r\n            // same concept for vertical distance, we just don't want it crossing <0 (also giving it an offest of 10 so it doesn't glue to the edge)\r\n            hoverY = Math.max(e.pageY - hoverNode.offsetHeight - (options.distanceToMouse.value * options.UIScale.value), 10)\r\n        }\r\n    }\r\n\r\n    console.log('LOADED OPTIONS', options)\r\n    \r\n</script>\r\n    \r\n<div id=\"hover\" \r\nclass=\"select-none absolute truncate text-white rounded z-[9999] {options.useMotion.value ? 'use-motion' : ''}\"\r\nbind:this={hoverNode} \r\nstyle=\"--UIScale: {options.UIScale.value}; pointer-events: {isMakingSelection ? 'all' : 'none'}\">\r\n    <div id=\"hover-content\" class=\"\" bind:this={hoverContentNode}>\r\n        {#each hoverContent as entry}\r\n            {#if entry.isSvelteComponent}\r\n                <svelte:component this={entry.component} {...entry.props}/>\r\n            {:else}\r\n                <div class=\"blurry-bg {entry.gender}-entry flex pointer-events-none px-1 w-full items-center text-center text-sm font-bold\">\r\n                    <img src=\"{entry.flagURL}\"class=\"block mr-1 rounded-[3px]\" alt=\"{entry.countryCode} flag\"/>\r\n                    <div class=\"opacity-90\">{entry.wordForGender}</div>\r\n                </div>\r\n            {/if}\r\n        {/each} \r\n    </div>\r\n</div>\r\n<div bind:this={staticHoverNode} id=\"static-hover\" class=\"absolute left-0 top-0 z-[99999]\">\r\n</div>\r\n\r\n<style lang=\"postcss\">\r\n    @tailwind base;\r\n    @tailwind components;\r\n    @tailwind utilities;\r\n    \r\n    :global(.m-entry) {\r\n        background: linear-gradient(to right, hsla(223, 92%, 54%, .8), hsla(203, 92%, 54%, .5));\r\n    }   \r\n\r\n    :global(.f-entry) {\r\n        background: linear-gradient(to right, hsla(306, 92%, 54%, .8), hsla(284, 92%, 54%, .5));\r\n    }\r\n\r\n    :global(.n-entry) {\r\n        background: linear-gradient(to right, hsla(137, 92%, 54%, .8), hsla(117, 92%, 54%, .5));\r\n    }\r\n\r\n    #hover {\r\n        transform-origin: bottom left;\r\n        scale: var(--UIScale);\r\n    }\r\n\r\n    .use-motion {\r\n        transition: top .15s, left .15s, opacity .15s ease-in-out;\r\n        transition-timing-function: cubic-bezier(.42,.29,0,1.28);\r\n    }\r\n        \r\n    .blurry-bg {\r\n        -webkit-backdrop-filter: blur(3px); \r\n        backdrop-filter: blur(3px);\r\n    }\r\n\r\n</style>\r\n    "],"names":["ctx","create_if_block_3","if_block1","create_if_block_2","i","button","button_disabled_value","insert","target","div17","anchor","append","div9","div16","h1","form","div14","div11","label0","div10","select0","select1","div13","label1","div12","select2","select3","div15","current","dirty","TRANSITION_DURATION_MS","create_if_block_5","create_if_block_6","create_if_block_7","create_if_block_8","create_if_block_4","attr","div1","div1_class_value","div0","a","div","REPLACEMENT_STRING","add_render_callback","span2","span0","span1","option","set_data","t","t_value","if_block","create_if_block_1","label","label_for_value","div1_input_handler","small","div2","textarea","set_input_value","t0","t0_value","create_if_block","dialog","syncDeckAndModelChoices","deckName","modelName","syncFields","fieldsData","serializedFields","obj","fieldName","staticHoverNode","$$props","parentDocument","options","contentToSave","initialX","initialY","popupNode","isPopupBeingDragged","isPopupEnabled","cardModelSelectNode","selectedDeck","deckNameSelectNode","selectedModel","savedSyncFields","cardDecks","cardModels","cardModelFieldsData","messageType","canSubmit","highlightWarnClose","highlightSubmitSuccessful","onMount","$$invalidate","tryAnkiConnectionLoop","handleDocumentMouseUp","isFirstTime","newCardDecks","getDeckNames","newCardModels","getModelNames","updateModelFields","AnkiResponseError","err","handleAnkiError","secsUntilRetry","error","callback","EXTENSION_ALIAS","AnkiConnectionError","countdown","handleSubmit","e","formData","fieldsVaues","fieldsValuesReplaced","callbackResult","addNote","initialDragOffsetX","initialDragOffsetY","handleDragMouseDown","popupRect","handleDragMouseMove","handleDragMouseUp","destroyPopup","handleDeckSelectionChange","handleModelSelectChange","fields","getModelFieldNames","field","replaceWithCoolSpan","content","escapedContent","escapeHtml","idxOfReplaceable","newContent","handleFieldInput","replacedContent","displayHTMLNodeRect","$$value","src_url_equal","img","img_src_value","selectionText","hideToolbar","toolbarNode","mountPopup","toolbarRect","Popup","handleClickAnki","t1_value","img_alt_value","t1","switch_instance_spread_levels","switch_value","get_spread_update","get_spread_object","each_blocks","rootNode","shadowRootNode","isExtensionOn","hoverNode","hoverContentNode","hoverX","hoverY","cursorX","cursorY","isMakingSelection","previousWord","DEFAULT_OPTIONS","browserStorageSync","result","hoverContent","readyParent","hoverAnimateLoop","Util.getPageWidth","response","enableExtension","request","sender","sendResponse","disableExtension","handleMouseMove","handleSelectionChange","handleKeyDown","existingShadowRoot","showHover","data","hideHover","selection","selectionRange","selectionRect","ToolBar","range","nodeContent","cursorOffset","textLeftOfCursor","textRightOfCursor","leftSeparatorIndex","rightSeparatorIndex","startWordIndex","endWordIndex","cleanedWord","updateHoverCoordinates"],"mappings":"qwBAkXiBA,EAAW,EAAA,GAAAC,GAAAD,CAAA,EAoBXE,EAAAF,MAAiB,MAASG,GAAAH,CAAA,IAmBJA,EAAS,CAAA,uBAAd,OAAII,GAAA,4BAcCJ,EAAU,EAAA,wBAAf,OAAII,GAAA,4BASf,OAAO,QAAQJ,EAAmB,EAAA,CAAA,uBAAvC,OAAII,GAAA;;;;;;;6mBAYkX,iBAAe,svDAAvCC,EAAA,SAAAC,EAAA,CAAAN,OAAa,qRA7GxXA,EAAmB,CAAA,EAChB,4BACE,mBAELA,EAAW,EAAA,EACPA,EAAW,EAAA,GAAE,WAAS,CAAMA,EAAyB,EAAA,EAClD,iBACE,mBACHA,EAAyB,EAAA,EACxB,mBACE,2BAETA,EAAkB,EAAA,EAAG,yBAA2B,IAAE,6BAAA,iEAbnDO,EAiHMC,EAAAC,EAAAC,CAAA,EA/FFC,EAaMF,EAAAG,CAAA,SACND,EAgFMF,EAAAI,CAAA,EA/EFF,EAEKE,EAAAC,CAAA,qDA+BLH,EA6COE,EAAAE,CAAA,EA5CHJ,EA6BMI,EAAAC,CAAA,EA5BFL,EAaMK,EAAAC,CAAA,EAZFN,EAA2EM,EAAAC,CAAA,SAC3EP,EAUMM,EAAAE,CAAA,EATFR,EAOSQ,EAAAC,CAAA,mEACTT,EAAiJQ,EAAAE,CAAA,SAGzJV,EAaMK,EAAAM,CAAA,EAZFX,EAA8DW,EAAAC,CAAA,SAC9DZ,EAUMW,EAAAE,CAAA,EATFb,EAOSa,EAAAC,CAAA,mEACTd,EAAiJa,EAAAE,CAAA,mEAgB7Jf,EAAgDI,EAAAY,EAAA,UAChDhB,EAAgZI,EAAAV,CAAA,uCA1FxYL,EAAmB,EAAA,CAAA,gBAAcA,EAAiB,EAAA,CAAA,eAoDnCA,EAAyB,EAAA,CAAA,eAczBA,EAAuB,EAAA,CAAA,kBApBsBA,EAAY,EAAA,CAAA,CAAA,yBA9B/EA,EAAW,EAAA,uGAoBXA,MAAiB,wEAmBKA,EAAS,CAAA,oBAAd,OAAII,GAAA,EAAA,mHAAJ,wBAcKJ,EAAU,EAAA,qBAAf,OAAII,GAAA,EAAA,qHAAJ,0BASX,OAAO,QAAQJ,EAAmB,EAAA,CAAA,oBAAvC,OAAII,GAAA,EAAA,iHAAJ,QAY8V,CAAAwB,GAAAC,EAAA,CAAA,EAAA,MAAAvB,KAAAA,EAAA,CAAAN,OAAa,qIA7GxXA,EAAmB,CAAA,EAChB,4BACE,mBAELA,EAAW,EAAA,EACPA,EAAW,EAAA,GAAE,WAAS,CAAMA,EAAyB,EAAA,EAClD,iBACE,mBACHA,EAAyB,EAAA,EACxB,mBACE,2BAETA,EAAkB,EAAA,EAAG,yBAA2B,IAAE,0FAGL,KAAM,IAAK,SAAUA,EAAQ,CAAA,EAAA,UAAU,MAAQ8B,GAAyB,qDAAxE,KAAM,IAAK,SAAU9B,EAAQ,CAAA,EAAA,UAAU,MAAQ8B,GAAyB,kLAyBrG,GAAA9B,OAAe,aAAY,OAAA+B,GAEtB,GAAA/B,OAAe,WAAU,OAAAgC,GAEzB,GAAAhC,OAAe,UAAS,OAAAiC,GAExB,GAAAjC,OAAe,UAAS,OAAAkC,wBAI7BhC,EAAAF,OAAe,cAAYmC,GAAAnC,CAAA,wFAdCoC,EAAAC,EAAA,QAAAC,EAAA,4BAAAtC,OAAe,UAAY,mBAAqB,kBAAgB,sFAAA,gEAArGO,EAiBMC,EAAA6B,EAAA3B,CAAA,EAdFC,EAUM0B,EAAAE,CAAA,mHACDvC,OAAe,wEAda,CAAA4B,GAAAC,EAAA,CAAA,EAAA,MAAAS,KAAAA,EAAA,4BAAAtC,OAAe,UAAY,mBAAqB,kBAAgB,8IACnD,KAAM,IAAK,SAAUA,EAAQ,CAAA,EAAA,UAAU,MAAQ,IAAM,+CAArD,KAAM,IAAK,SAAUA,EAAQ,CAAA,EAAA,UAAU,MAAQ,IAAM,0GAShE,qCAEnC,uEAJmC,4CAEnC,uEAJoC,uFAEpC,2EAJiC,2EAC4C,2CAAoH,0BACjM,wJAD6EO,EAAoHC,EAAAgC,EAAA9B,CAAA,gGAUlJ,cAAY,MAACV,EAAc,EAAA,CAAA,MAAC,kBAAgB,yEAA3FO,EAAiGC,EAAAiC,EAAA/B,CAAA,gDAArCV,EAAc,EAAA,CAAA,wGAM/C0C,oZAGX1C,EAAa,CAAA,IAAA,QAAA2C,GAAA,IAAA3C,EAAA,EAAA,EAAA,KAAA4C,CAAA,CAAA,4FAJjCrC,EAOMC,EAAAiC,EAAA/B,CAAA,EANFC,EAAqD8B,EAAAI,CAAA,SACrDlC,EAA+B8B,EAAAK,CAAA,SAC/BnC,EAGQ8B,EAAAG,CAAA,EAFQ5C,EAAa,CAAA,IAAA,qBAAbA,EAAa,CAAA,uEAAbA,EAAa,CAAA,IAAA4C,EAAA,wBAAb5C,EAAa,CAAA,qDAemFA,EAAQ,EAAA,EAAA,qDAArFA,EAAQ,EAAA,0EAAiCA,EAAQ,EAAA,GAAIA,EAAY,CAAA,GAAK,aAArFO,EAA8GC,EAAAuC,EAAArC,CAAA,kCAAlBV,EAAQ,EAAA,EAAA,KAAAgD,GAAAC,EAAAC,CAAA,mBAArFlD,EAAQ,EAAA,qDAAiCA,EAAQ,EAAA,GAAIA,EAAY,CAAA,GAAK,6DAcUA,EAAS,EAAA,EAAA,qDAAzFA,EAAS,EAAA,0EAAiCA,EAAS,EAAA,GAAIA,EAAa,CAAA,GAAK,aAAxFO,EAAkHC,EAAAuC,EAAArC,CAAA,mCAAnBV,EAAS,EAAA,EAAA,KAAAgD,GAAAC,EAAAC,CAAA,oBAAzFlD,EAAS,EAAA,sDAAiCA,EAAS,EAAA,GAAIA,EAAa,CAAA,GAAK,0EAW5B,4BAA0B,4DADnDA,EAAU,EAAA,EAAA,mCACTmD,EAAAnD,MAAa,YAAUoD,GAAA,wMAD3DhB,EAAAiB,EAAA,MAAAC,EAAA,SAAStD,EAAU,EAAA,CAAA,oMAIDA,EAAU,EAAA,CAAA,yBAA+EA,EAAU,EAAA,CAAA,uPACzGA,EAAU,EAAA,CAAA,6TAAmTA,MAAa,cAAW,QAAA2C,GAAAY,CAAA,mFAFvTvD,EAAU,EAAA,CAAA,aAAMA,EAAU,EAAA,CAAA,UAJpFO,EAGMC,EAAA+B,EAAA7B,CAAA,EAFFC,EAAkE4B,EAAAc,CAAA,gBAClE1C,EAA+G4B,EAAAiB,CAAA,0BAEnHjD,EAIMC,EAAAiD,EAAA/C,CAAA,EAHFC,EAAkV8C,EAAAC,CAAA,EAA/PC,GAAAD,EAAA1D,MAAa,KAAK,SACrGW,EAAqX8C,EAAApB,CAAA,EAAhCrC,MAAa,cAAW,SAAxBqC,EAAA,UAAArC,MAAa,gCAD7SA,EAAgB,EAAA,CAAA,qEAJtBA,EAAU,EAAA,EAAA,KAAAgD,GAAAY,EAAAC,CAAA,EAA7ChC,EAAA,CAAA,EAAA,MAAAyB,KAAAA,EAAA,SAAStD,EAAU,EAAA,iBACiBA,MAAa,uFAG/BA,EAAU,EAAA,kCAA+EA,EAAU,EAAA,uCAA9C2D,GAAAD,EAAA1D,MAAa,KAAK,qCAC7EA,EAAU,EAAA,gBAAmT6B,EAAA,CAAA,EAAA,MAAA7B,MAAa,cAAWqC,EAAA,YAAxBA,EAAA,UAAArC,MAAa,+BAF5SA,EAAU,EAAA,8CAAMA,EAAU,EAAA,+FAxG/FA,EAAc,CAAA,GAAA8D,GAAA9D,CAAA,6DAdoBA,EAAO,CAAA,EAAC,oBAAoB,MAAQ,QAAU,YAAU,6CAAA,mBAChFA,EAAO,CAAA,EAAC,QAAQ,KAAK,UADxCO,EAkISC,EAAAuD,EAAArD,CAAA,uCApHAV,EAAc,CAAA,6HAdoBA,EAAO,CAAA,EAAC,oBAAoB,MAAQ,QAAU,YAAU,+FAChFA,EAAO,CAAA,EAAC,QAAQ,KAAK,6EAhS9B,MAAA8B,GAAyB,aAkHtBkC,GAAwBC,EAAUC,EAAS,CAChD,OAAO,QAAQ,KAAK,IAAG,CAAE,aAAcD,EAAU,cAAeC,IAG3D,SAAAC,GAAWC,EAAU,CAOtB,IAAAC,EAAmB,OAAO,KAAKD,CAAU,EAAE,OAAQ,CAAAE,EAAKC,KACpDH,EAAWG,CAAS,EAAE,aACdD,EAAIC,CAAS,EAAIH,EAAWG,CAAS,EAAE,OAAMD,OAKzD,OAAO,KAAKD,CAAgB,EAAE,QAAU,EACxC,OAAO,QAAQ,KAAK,OAAO,aAAa,EAExC,OAAO,QAAQ,KAAK,IAAG,CAAE,YAAaA,CAAgB,CAAA,yBAhKnD,gBAAAG,CAAe,EAAAC,EACf,CAAA,eAAAC,EAAiB,QAAQ,EAAAD,GACzB,QAAAE,CAAO,EAAAF,EACP,CAAA,cAAAG,EAAgB,MAAS,EAAAH,EACzB,CAAA,SAAAI,EAAW,CAAC,EAAAJ,EACZ,CAAA,SAAAK,EAAW,CAAC,EAAAL,EACnBM,EACAC,EAAsB,GACtBC,EAAiB,GAEjBC,EACAC,EACAC,EACAC,EAEAC,EAEAC,EAAS,CAAA,EACTC,EAAU,CAAA,EACVC,EAAmB,CAAA,EACnBC,EAAc,GACdC,EAAY,GACZC,EAAqB,GACrBC,EAA4B,GAKhCC,GAAO,IAAA,CACHC,EAAA,EAAAhB,EAAU,MAAM,KAAOF,EAAW,KAAIE,CAAA,EACtCgB,EAAA,EAAAhB,EAAU,MAAM,IAAMD,EAAW,KAAIC,CAAA,EACrCgB,EAAA,EAAAd,EAAiB,EAAI,EACrBe,IACAtB,EAAe,iBAAiB,UAAWuB,CAAqB,mBAGrDD,EAAsBE,EAAc,GAAI,KAEzC,MAAAC,QAAqBC,KACrBC,QAAsBC,KACtB,GAAAH,GAAgBE,EAGlBN,EAAA,EAAAR,EAAYY,CAAY,EACxBJ,EAAA,GAAAP,EAAaa,CAAa,EAE1BN,EAAA,GAAAJ,EAAY,EAAI,EAEZH,EAAW,OAAS,GACpBe,GAAkBf,EAAW,CAAC,CAAA,EAG7BU,EAIDH,EAAA,GAAAL,EAAc,EAAE,GAHhBK,EAAA,GAAAL,EAAc,SAAS,EACzB,gBAAkBK,EAAA,GAAAL,EAAc,EAAE,GAAG,MAMvCK,EAAA,EAAAZ,SAAsB,mBAAmB,IAAI,cAAc,GAAG,YAAY,EAC1EY,EAAA,EAAAV,SAAuB,mBAAmB,IAAI,eAAe,GAAG,aAAa,EAE7EC,SAAyB,mBAAmB,IAAI,aAAa,GAAG,aAAW,kBAtBjEkB,SA0BTC,GACLC,GAAgBD,EAAW,IAAAT,EAAsB,EAAK,CAAA,GAK1D,IAAAW,EAAiB,WACZD,GAAgBE,EAAOC,EAAQ,CAE5B,OADR,QAAQ,MAAMC,GAAkB,KAAMF,CAAK,EACnCA,EAAM,YAAW,MAChBG,GACLhB,EAAA,GAAAL,EAAc,YAAY,aAEzBc,GACDT,EAAA,GAAAL,EAAc,UAAU,gBAGxBK,EAAA,GAAAL,EAAc,SAAS,WAIvBmB,EAAQ,CACRd,EAAA,GAAAY,EAAiB,CAAC,EACd,IAAAK,EAAY,iBACZjB,EAAA,GAAAY,GAAiB,CAAC,EAEdA,GAAkB,GAAK1B,IACvB4B,IACA,cAAcG,CAAS,IAE5B,MAKI,eAAAC,GAAaC,EAAC,CACnB,MAAAC,EAAe,IAAA,SAASD,EAAE,MAAM,EAChCE,EAAc,OAAO,KAAK3B,CAAmB,EAAE,OAAM,CAAEnB,EAAKC,MAC9DD,EAAIC,EAAS,EAAGkB,EAAoBlB,EAAS,EAAE,MAC/CD,GAAG,CAAA,CAAA,EAED+C,EAAuB,OAAO,KAAKD,CAAW,EAAE,OAAM,CAAE9C,EAAKC,MAC/DD,EAAIC,EAAS,EAAE6C,EAAY7C,EAAS,EAAE,WAAW,YAAaK,CAAa,EAC3EN,GAAG,CAAA,CAAA,EAGPyB,EAAA,GAAAJ,EAAY,EAAK,MACb2B,OAEAA,GAAuB,MAAAC,GAAQJ,EAAS,IAAI,UAAU,EAAGA,EAAS,IAAI,WAAW,EAAGE,CAAoB,QAExGtB,EAAA,GAAAL,EAAc,UAAU,EACxB,gBACIK,EAAA,GAAAL,EAAc,EAAE,GACjB,KAEH4B,IAEAvB,EAAA,GAAAF,EAA4B,EAAI,EAChC,gBACIE,EAAA,GAAAF,EAA4B,EAAK,GAClC,KAEH7B,GAAwBmD,EAAS,IAAI,UAAU,EAAGA,EAAS,IAAI,WAAW,CAAA,EAE1EhD,GAAWsB,CAAmB,GAE9BiB,OAAoBF,EAAiB,EAEzCT,EAAA,GAAAJ,EAAY,EAAI,EA6BhB,IAAA6B,GACAC,GACK,SAAAC,EAAoBR,EAAC,OACpBS,EAAY5C,EAAU,wBAG5ByC,IAAuBN,EAAE,QAAUS,EAAU,KAC7CF,IAAuBP,EAAE,QAAUS,EAAU,IAC7CjD,EAAe,iBAAiB,YAAakD,CAAmB,EAChElD,EAAe,iBAAiB,UAAWmD,CAAiB,EAC5D9B,EAAA,EAAAf,EAAsB,EAAI,EAC1Be,EAAA,GAAAH,EAAqB,EAAK,EAC1BG,EAAA,GAAAF,EAA4B,EAAK,EAG5B,SAAAgC,EAAkBX,EAAC,CACxBnB,EAAA,EAAAf,EAAsB,EAAK,EAE3BN,EAAe,oBAAoB,YAAakD,CAAmB,EACnElD,EAAe,oBAAoB,UAAWmD,CAAiB,EAG1D,SAAAD,EAAoBV,EAAC,CAC1BA,EAAE,eAAc,MAChBnC,EAAU,MAAM,MAAQJ,EAAQ,oBAAoB,MAAQuC,EAAE,QAAUA,EAAE,OAASM,GAAqB,KAAIzC,CAAA,MAC5GA,EAAU,MAAM,KAAOJ,EAAQ,oBAAoB,MAAQuC,EAAE,QAAUA,EAAE,OAASO,GAAqB,KAAI1C,CAAA,EAGtG,SAAAkB,EAAsBiB,EAAC,CACxBA,EAAE,OAAO,IAAMJ,GAAgB,QAC3BlB,EACAkC,IAEA/B,EAAA,GAAAH,EAAqB,EAAI,EAG7BG,EAAA,GAAAH,EAAqB,EAAK,WAIzBkC,GAAY,CACjB/B,EAAA,EAAAd,EAAiB,EAAK,EACtBP,EAAe,oBAAoB,UAAWuB,CAAqB,EACnE,gBACIlB,EAAU,WAAW,YAAYA,CAAS,GAC3CjD,IAGQ,eAAAiG,EAA0Bb,EAAC,CACtCnB,EAAA,EAAAZ,EAAe+B,EAAE,OAAO,KAAK,EAGlB,eAAAc,GAAwBd,EAAC,CACpCnB,EAAA,EAAAV,EAAgB6B,EAAE,OAAO,KAAK,EAC9BX,GAAkBW,EAAE,OAAO,KAAK,EAIrB,eAAAX,GAAkBrC,EAAS,OAChC+D,EAAM,MAASC,GAAmBhE,CAAS,OAmBjDuB,EAAsBwC,EAAO,OAAQ,CAAA3D,EAAK6D,IAEnC7C,EAAgB6C,CAAK,GACZ7D,EAAI6D,CAAK,EAAA,CACb,MAAO7C,EAAgB6C,CAAK,EAC5B,WAAY,GACZ,YAAaC,EAAoB9C,EAAgB6C,CAAK,CAAA,GACxD7D,IAEMA,EAAI6D,CAAK,EAAA,CACb,MAAM,GACN,WAAY,GACZ,YAAY,IACd7D,QAQL,SAAA8D,EAAoBC,EAAO,OAC1BC,EAAiBC,GAAWF,CAAO,EACnCG,EAAmBH,EAAQ,QAAQ3F,EAAkB,MACvD+F,EACA,OAAAD,QACAC,EAAaH,EAAe,WAAW5F,gCAAiDA,WAAkB,GAEvG+F,EAeF,SAAAC,EAAiBxB,EAAC,CACjB,MAAA3C,EAAY2C,EAAE,OAAO,QAAQ,UAC7BmB,EAAUnB,EAAE,OAAO,MACnBoB,EAAiBC,GAAWF,CAAO,EACzCtC,EAAA,GAAAN,EAAoBlB,CAAS,EAAE,MAAQ+D,EAAc7C,CAAA,EAC/C,MAAA+C,GAAmBF,EAAe,QAAQ5F,EAAkB,MAC9DiG,EACAH,QACAG,EAAkBL,EAAe,WAAW5F,gCAAiDA,WAAkB,EAE/GqD,EAAA,GAAAN,EAAoBlB,CAAS,EAAE,WAAa,GAAIkB,CAAA,IAEhDkD,EAAkBL,EAClBvC,EAAA,GAAAN,EAAoBlB,CAAS,EAAE,WAAa,GAAKkB,CAAA,GAIrDyB,EAAE,OAAO,mBAAmB,UAAYyB,EACxC5C,EAAA,GAAAN,EAAoBlB,CAAS,EAAE,YAAcoE,EAAelD,CAAA,EACtD,MAAAmD,GAAsB1B,EAAE,OAAO,mBAAmB,sBAAqB,EAC7EA,EAAE,OAAO,MAAM,OAAS0B,GAAoB,OAASjE,EAAQ,QAAQ,MAAQ,KAC7EuC,EAAE,OAAO,MAAM,MAAQ0B,GAAoB,MAAQjE,EAAQ,QAAQ,MAAQ,kBAiFnDC,EAAa,KAAA,yBAAasC,GAAC,CAAU,IAAAmB,EAAUnB,EAAE,OAAO,UAAWmB,EAAUE,GAAWF,CAAO,8CAYxFjD,EAAkByD,4DAclB3D,EAAmB2D,2CAiB8D,MAAK,KAAA,sCAC6P,YAAW,KAAA,4DAxH7W9D,EAAS8D,8jBC5RnBC,GAAAC,EAAA,IAAAC,EAAA,OAAO,QAAQ,OAAO,uBAAuB,CAAA,GAAA5G,EAAA2G,EAAA,MAAAC,CAAA,0GAD3DzI,EAEMC,EAAAiC,EAAA/B,CAAA,EADFC,EAAyF8B,EAAAsG,CAAA,4BADhE/I,EAAe,CAAA,CAAA,kFA9B7B,gBAAAwE,CAAe,EAAAC,GACf,eAAAC,CAAc,EAAAD,GACd,cAAAwE,CAAa,EAAAxE,GACb,YAAAyE,CAAW,EAAAzE,GACX,QAAAE,CAAO,EAAAF,EACd0E,WAGKC,GAAU,OACTC,EAAcF,EAAY,4BACpBG,GAAK,CACb,OAAQ9E,EACR,MAAK,CACD,eAAAE,EACA,gBAAAF,EACA,SAAU6E,EAAY,MAAQ1E,EAAQ,oBAAoB,MAAQ,EAAI,SAAS,gBAAgB,YAAc,SAAS,KAAK,YAC3H,SAAU0E,EAAY,KAAO1E,EAAQ,oBAAoB,MAAQ,EAAI,SAAS,gBAAgB,WAAa,SAAS,KAAK,WACzH,cAAesE,EACf,QAAAtE,cAMH4E,GAAe,CACpBH,IACAF,8CAIiDC,EAAWN,weC8OvBW,EAAAxJ,MAAM,cAAa,wEADjC8I,GAAAC,EAAA,IAAAC,EAAAhJ,MAAM,OAAO,GAAAoC,EAAA2G,EAAA,MAAAC,CAAA,wDAAyC5G,EAAA2G,EAAA,MAAAU,EAAAzJ,MAAM,YAAW,OAAA,0CAD/DoC,EAAAC,EAAA,QAAAC,EAAA,aAAAtC,MAAM,OAAM,sGAAA,UAAnCO,EAGMC,EAAA6B,EAAA3B,CAAA,EAFFC,EAA2F0B,EAAA0G,CAAA,SAC3FpI,EAAmD0B,EAAAE,CAAA,wBADxCV,EAAA,CAAA,EAAA,IAAA,CAAAiH,GAAAC,EAAA,IAAAC,EAAAhJ,MAAM,OAAO,gBAAyC6B,EAAA,CAAA,EAAA,IAAA4H,KAAAA,EAAAzJ,MAAM,YAAW,uBACzD6B,EAAA,CAAA,EAAA,IAAA2H,KAAAA,EAAAxJ,MAAM,cAAa,KAAAgD,GAAA0G,EAAAF,CAAA,EAFzB3H,EAAA,CAAA,EAAA,IAAAS,KAAAA,EAAA,aAAAtC,MAAM,OAAM,2KAFU,MAAA2J,EAAA,CAAA3J,MAAM,KAAK,EAAhC,IAAA4J,EAAA5J,MAAM,8MAAe6J,GAAAF,EAAA,CAAAG,GAAA9J,MAAM,KAAK,CAAA,CAAA,KAAhC,GAAA6B,EAAA,CAAA,EAAA,IAAA+H,KAAAA,EAAA5J,MAAM,WAAS,qUADtC,OAAAA,MAAM,kBAAiB,4UADzBA,EAAY,CAAA,uBAAjB,OAAII,GAAA,8NAJoDgC,EAAAC,EAAA,QAAAC,EAAA,8DAAAtC,KAAQ,UAAU,MAAQ,aAAe,IAAE,gBAAA,mBAE1FA,EAAO,CAAA,EAAC,QAAQ,KAAK,wBAAoBA,EAAiB,CAAA,EAAG,MAAQ,MAAM,gGAH9FO,EAgBMC,EAAA6B,EAAA3B,CAAA,EAZFC,EAWM0B,EAAAE,CAAA,6EAEVhC,EACMC,EAAAiD,EAAA/C,CAAA,sCAbSV,EAAY,CAAA,oBAAjB,OAAII,GAAA,EAAA,4GAAJ,OAAIA,EAAA2J,EAAA,OAAA3J,GAAA,aAJoD,CAAAwB,GAAAC,EAAA,CAAA,EAAA,IAAAS,KAAAA,EAAA,8DAAAtC,KAAQ,UAAU,MAAQ,aAAe,IAAE,mEAE1FA,EAAO,CAAA,EAAC,QAAQ,KAAK,sCAAoBA,EAAiB,CAAA,EAAG,MAAQ,MAAM,+BAEpF,OAAII,GAAA,sLAnQC,SAAA4J,CAAQ,EAAAvF,GACR,eAAAwF,CAAc,EAAAxF,EACd,CAAA,eAAAC,EAAiB,QAAQ,EAAAD,EAEhCyF,EAAgB,GAEhBC,EAAWC,EAGXC,EAAS,EACTC,EAAS,EACTC,EAAU,EACVC,EAAU,EACVC,EAAoB,GACpBC,EACAlG,EAEAG,EAAUgG,GAEdC,GAAmB,IAAI,SAAS,EAAE,KAAKC,GAAM,CACzC9E,EAAA,EAAApB,EAAUkG,EAAO,SAAWF,EAAe,QAG3CG,EAAY,CAAA,EAEhBhF,GAAO,IAAA,CACHiF,eAGKC,GAAgB,CACrBjF,EAAA,EAAAoE,EAAU,MAAM,KAAOE,EAAS,KAAIF,CAAA,EACpCpE,EAAA,EAAAoE,EAAU,MAAM,IAAMG,EAAS,KAAIH,CAAA,EACnC,OAAO,sBAAsBa,CAAgB,WAGxCD,GAAW,CAEJE,KAGZ,OAAO,QAAQ,aAAa,KAAM,eAAe,EAAGC,GAAQ,CACxD,QAAQ,IAAIpE,GAAiB,6BAA6BoE,EAAS,aAAa,EAE5EA,EAAS,eAAa,CAAKhB,GAC3BiB,MAIR,gBACIH,KACD,IAIP,OAAO,QAAQ,UAAU,YAAW,SACvBI,EAASC,EAAQC,EAAY,CAC1B,OAAAF,EAAQ,KAAI,KACX,kBACIlB,GAAeiB,cAEnB,mBACDI,cAEC,oBACD5G,EAAUyG,EAAQ,IAAI,oBAS7BD,GAAe,CACpBjB,EAAgB,GAChBxF,EAAe,iBAAiB,YAAa8G,CAAe,EAC5D9G,EAAe,iBAAiB,kBAAmB+G,CAAqB,EACxE/G,EAAe,iBAAiB,UAAWgH,EAAa,EAExDhH,EAAe,KAAK,YAAYsF,CAAQ,WAGnCuB,GAAgB,CACrBrB,EAAgB,GAChBxF,EAAe,oBAAoB,YAAa8G,CAAe,EAC/D9G,EAAe,oBAAoB,kBAAmB+G,CAAqB,EAC3E/G,EAAe,oBAAoB,UAAWgH,EAAa,EAGvD,IAAAC,EAAqBjH,EAAe,kBAAkBoC,SAAe,EACrE6E,GACAA,EAAmB,OAAM,EAKxB,SAAAC,EAAUC,EAAI,CACnB9F,EAAA,EAAA+E,EAAee,CAAI,EAEnB9F,EAAA,EAAAoE,EAAU,MAAM,QAAU,EAACA,CAAA,WAGtB2B,GAAS,CACVrB,IAGJC,EAAe,GACf3E,EAAA,EAAAoE,EAAU,MAAM,QAAU,EAACA,CAAA,GAGtB,SAAAsB,EAAsBvE,EAAC,KAMxB6E,EAAYrH,EAAe,eAC1B,GAAAqH,EAAU,YAyBXhG,EAAA,EAAA0E,EAAoB,EAAK,EACzBqB,QA1BsB,CAClB,IAAAE,EAAiBD,EAAU,WAAW,CAAC,EACvC9C,EAAgB8C,EAAU,WAAW,CAAC,EAAE,SAAQ,EAAG,OACnDE,EAAgBD,EAAe,wBAEnCjG,EAAA,EAAA0E,EAAoB,EAAI,EAExBJ,EAAS4B,EAAc,EAAKA,EAAc,MAAQ,EAAM9B,EAAU,YAAc,EAGhFG,EAAS2B,EAAc,EAAIvH,EAAe,gBAAgB,WAAcyF,EAAU,aAAexF,EAAQ,gBAAgB,OAASA,EAAQ,QAAQ,MAElJiH,EAAS,EACL,kBAAmB,GACnB,UAAWM,GACX,MAAK,CACD,gBAAA1H,EACA,eAAAE,EACA,cAAAuE,EACA,YAAW,IAAA,CAASlD,EAAA,EAAA0E,EAAkB,EAAK,EAACqB,KAC5C,QAAAnH,OAWP,SAAA6G,EAAgBtE,EAAC,IACtBqD,EAAUrD,EAAE,MACZsD,EAAUtD,EAAE,OAEPiD,GACDM,EAAiB,WAGjB0B,KAEAzH,EAAe,oBACfyH,EAAQzH,EAAe,oBAAoBwC,EAAE,QAASA,EAAE,OAAO,EACxDA,EAAE,cACTiF,EAAQzH,EAAe,cACvByH,EAAM,SAASjF,EAAE,YAAaA,EAAE,WAAW,GAI/C,QAAQ,IAAI,QAASiF,CAAK,GACrBA,EAAK,aAEJC,EADOD,EAAM,eACM,cACpBC,EACDN,eAGMO,EAAeF,EAAM,YAErBG,GAAmBF,EAAY,MAAM,EAAGC,CAAY,EACpDE,GAAoBH,EAAY,MAAMC,CAAY,EACpD,GAAAC,IAAoBC,GAAiB,CAO/B,MAAAC,EAAqBF,GAAiB,OAAO,gDAAgD,EAC7FG,EAAsBF,GAAkB,OAAO,oBAAoB,EAEnEG,EAAiBF,IAAwB,GAAI,EAAIA,EAAqB,EACtEG,EAAeF,IAAmB,GAAUL,EAAY,OAASC,EAAeI,EAKhFG,EAFOR,EAAY,MAAMM,EAAgBC,CAAY,EAG1D,cAKG,GAAAC,IAAgBlC,EAAY,KACvBkC,EAAW,OAChBlC,EAAekC,EACf,OAAO,QAAQ,YAAa,CAAA,KAAMA,EAAa,KAAM,aAAe1B,GAAQ,CAEpEA,EAAS,KAAK,OAAS,EACvBU,EAAUV,EAAS,IAAI,EAEvBY,QAQpBe,GAAuB3F,CAAC,EAGnB,SAAAwE,GAAcxE,EAAC,CACxBA,EAAE,yBAAwB,EAEtB,SAAS,cAAc,UAAY,UAEjCA,EAAE,MAAQ,KAAOA,EAAE,MAAQ,MAAQA,EAAE,QAAW,CAAAA,EAAE,SAAO,CAAKA,EAAE,cAC9DoC,GAAK,CACL,OAAQ9E,EACR,MAAK,CACD,eAAAE,EACA,gBAAAF,EACA,SAAU+F,GAAW5F,EAAQ,oBAAoB,MAAQ,SAAS,gBAAgB,YAAc,SAAS,KAAK,WAAa,GAC3H,SAAU6F,GAAW7F,EAAQ,oBAAoB,MAAQ,SAAS,gBAAgB,WAAa,SAAS,KAAK,UAAY,GACzH,QAAAA,EACA,cAAe,MAQlB,SAAAkI,GAAuB3F,EAAC,CACxBuD,IAEDJ,EAAS,KAAK,IAAI,OAAO,WAAcF,EAAU,YAAcxF,EAAQ,QAAQ,MAAS,GAAIuC,EAAE,MAASvC,EAAQ,gBAAgB,MAAQA,EAAQ,QAAQ,KAAK,EAE5J2F,EAAS,KAAK,IAAIpD,EAAE,MAAQiD,EAAU,aAAgBxF,EAAQ,gBAAgB,MAAQA,EAAQ,QAAQ,MAAQ,EAAE,GAIxH,QAAQ,IAAI,iBAAkBA,CAAO,6CAQOyF,EAAgBvB,sDAFrDsB,EAAStB,qDAeJrE,EAAeqE"}